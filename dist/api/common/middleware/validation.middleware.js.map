{"version":3,"file":"validation.middleware.js","sourceRoot":"","sources":["../../../../src/api/common/middleware/validation.middleware.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yCAA2B;AAE3B,4FAAmE;AAEnE,wBAAwB;AACjB,MAAM,QAAQ,GACnB,CACE,MAMK,EACL,EAAE,CACJ,KAAK,EAAE,GAAY,EAAE,EAAY,EAAE,IAAkB,EAAE,EAAE;IACvD,IAAI,CAAC;QACH,IAAI,MAAM,YAAY,GAAG,CAAC,YAAY,EAAE,CAAC;YACvC,MAAM,MAAM,CAAC,QAAQ,EAAE,CAAC;gBACtB,IAAI,EAAE,GAAG,CAAC,IAAI;gBACd,IAAI,EAAE,GAAG,CAAC,MAAM;gBAChB,MAAM,EAAE,GAAG,CAAC,KAAK;aAClB,CAAC,CAAC;QACL,CAAC;aAAM,CAAC;YACN,MAAM,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACzC,MAAM,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAC3C,MAAM,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC;QAED,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC;IAAC,OAAO,KAAU,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,wBAAa,CAAC,GAAG,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAC9C,CAAC;AACH,CAAC,CAAC;AA5BS,QAAA,QAAQ,YA4BjB","sourcesContent":["import * as yup from \"yup\";\r\nimport type { Request, Response, NextFunction } from \"express\";\r\nimport HttpException from \"@/api/common/exceptions/http.exception\";\r\n\r\n/** 모든 요청 validate 체크 */\r\nexport const validate =\r\n  (\r\n    schema:\r\n      | yup.AnyObject\r\n      | {\r\n          body?: yup.AnyObject;\r\n          path?: yup.AnyObject;\r\n          params?: yup.AnyObject;\r\n        }\r\n  ) =>\r\n  async (req: Request, __: Response, next: NextFunction) => {\r\n    try {\r\n      if (schema instanceof yup.ObjectSchema) {\r\n        await schema.validate?.({\r\n          body: req.body,\r\n          path: req.params,\r\n          params: req.query,\r\n        });\r\n      } else {\r\n        await schema?.body?.validate?.(req.body);\r\n        await schema?.path?.validate?.(req.params);\r\n        await schema?.params?.validate?.(req.query);\r\n      }\r\n\r\n      return next();\r\n    } catch (error: any) {\r\n      next(new HttpException(400, error.message));\r\n    }\r\n  };\r\n"]}